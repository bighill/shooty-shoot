{"version":3,"sources":["global.js","init.js","shooter.js","shot.js","state.js","utility.js"],"names":["G","speed","isPlaying","z","top","left","el","game","document","getElementById","score","canvas","home","lose","win","els","playBtns","getElementsByClassName","init","setTimeout","this","setZ","Shooter","offsetWidth","drawCanvas","ctx","getContext","width","height","clearRect","draw","Shot","window","requestAnimationFrame","play","State","set","addEventListener","U","reload","playBtnListeners","removeEventListener","btns","i","length","wMultp","moveMultp","x","y","r","defaultOpacity","shootOpacity","currentOpacity","moveLeft","moveRight","shooting","delayShot","self","keyPress","keyRelease","beginPath","fillStyle","right","shoot","arc","Math","PI","fill","ev","keyCode","newX","engageDelay","launch","releaseDelay","data","shot","state","push","_drawEach","_isMiss","_drawShot","_deactivate","rect","splice","current","available","id","display","s","apply","clear","style","loop","a","location","arr","fn"],"mappings":"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","file":"js.js","sourcesContent":["(function(){ 'use strict';\n\nvar G = {\n\n    //\n    //  global game speed\n    //\n    speed : 0.3,\n\n    // \n    // values\n    //\n    isPlaying   : false,\n    z           : 0,\n    top         : 0,\n    left        : 0,\n\n    //\n    //  elements\n    //\n    el : {\n        game    : document.getElementById( 'shooty-shoot' ),\n        score   : document.getElementById( 'score' ),\n        canvas  : document.getElementById( 'shooty-shoot-canvas' ),\n        home    : document.getElementById( 'home' ),\n        lose    : document.getElementById( 'lose' ),\n        win     : document.getElementById( 'win' ),\n    },\n    els : {\n        playBtns : document.getElementsByClassName( 'play-btn'),\n    },\n};\n\nG.init = function()\n{\n    //\n    //  set 'z' value\n    //  ... which represents both width and height of canvas\n    //\n    setTimeout( this.setZ, 0 );\n\n    //\n    //  initialize the shooter\n    //\n    setTimeout( Shooter.init, 0 );\n\n    //\n    //  set enemy defaults\n    //\n};\n\nG.setZ = function()\n{\n    G.z = G.el.canvas.offsetWidth;\n};\n\nG.drawCanvas = function()\n{\n    var ctx = G.el.canvas.getContext( '2d' );\n\n    ctx.canvas.width  = G.z;\n    ctx.canvas.height = G.z;\n\n    ctx.clearRect( 0, 0, G.z, G.z ); // clear canvas\n\n    //\n    //  check for all possible collisions\n    //\n    //Collision.check();\n\n    //\n    //  draw the elements\n    //\n    // Enemy.draw( ctx );\n    Shooter.draw( ctx );\n    Shot.draw( ctx );\n\n    //\n    //  draw next frame\n    //\n    if ( G.isPlaying )\n        window.requestAnimationFrame( G.drawCanvas );\n};\n\nG.play = function()\n{\n    G.init();\n    G.isPlaying = true;\n    window.requestAnimationFrame( G.drawCanvas );\n    State.set( 'shooty-shoot' );\n};\n\nwindow.G = G;\n\n})();\n\n// EOF\n","(function(){ 'use strict';\n\n/*\n|\n|   get the party started\n|\n*/\nvar init = function()\n{\n    //\n    //  if window is resized, just reload and start over\n    //\n    window.addEventListener( 'resize', U.reload );\n\n    //\n    //  button listeners\n    //\n    playBtnListeners( G.els.playBtns );\n\n    //\n    //  display home pane\n    //\n    State.set( 'home' );\n\n    //\n    //  init() is complete\n    //  cleanup the DOMContentLoaded listener\n    //\n    document.removeEventListener( \"DOMContentLoaded\", init );\n};\n\n/*\n|\n|   listeners for buttons outside of the game\n|\n*/\nvar playBtnListeners = function( btns )\n{\n    for ( var i = btns.length - 1; i >= 0; i-- )\n        btns[i].addEventListener( 'click', G.play );\n};\n\n/*\n|\n|   hello browser.  please accept this code.  thx!\n|\n*/\ndocument.addEventListener( 'DOMContentLoaded', init );\n\n})();\n\n// EOF\n","(function(){ 'use strict';\n\n/*\n|\n|   shooter\n|\n|   ...brrap brrap pew pew\n|\n*/\n\nvar Shooter = {\n\n    //\n    // multipliers\n    //\n    wMultp      : 0.05,\n    moveMultp   : 0.01,\n\n    //\n    //  values set by this.init()\n    //\n    x : 0,\n    y : 0,\n    r : 0,\n\n    //\n    //  opacity\n    //\n    defaultOpacity  : 0.5,\n    shootOpacity    : 0.7,\n    currentOpacity  : 0.5,\n\n    //\n    // actions\n    //\n    moveLeft    : false,\n    moveRight   : false,\n    shooting    : false,\n    delayShot   : false,\n};\n\n/*\n|\n|   init\n|\n|   ...set values and add listeners\n|\n*/\nShooter.init = function()\n{\n    var self = Shooter;\n\n    self.r = G.z * self.wMultp;\n    self.x = ( G.z / 2 );\n    self.y = G.z - self.r - 1;\n\n    window.addEventListener( 'keydown', self.keyPress );\n    window.addEventListener( 'keyup', self.keyRelease );\n};\n\n/*\n|\n|   draw\n|\n|   ...analyze the state of things, adjust as needed, then draw\n|\n*/\nShooter.draw = function( ctx )\n{\n    //\n    //  prepare to draw\n    //\n    ctx.beginPath();\n    ctx.fillStyle = 'rgba( 126, 192, 238, '+this.currentOpacity+' )';\n\n    //\n    //  analyze actions\n    //\n    if ( this.moveLeft )\n        this.left();\n\n    if ( this.moveRight )\n        this.right();\n\n    if ( this.shooting )\n        this.shoot( ctx );\n\n    if ( this.currentOpacity > this.defaultOpacity )\n        this.currentOpacity = this.currentOpacity - 0.01;\n\n    //\n    //  draw\n    //\n    ctx.arc( this.x, this.y, this.r, 0, 2 * Math.PI );\n    ctx.fill();\n};\n\n/*\n|\n|   key press\n|\n*/\nShooter.keyPress = function( ev )\n{\n    //\n    //  left key\n    //\n    if ( ev.keyCode == 37 )\n        Shooter.moveLeft = true;\n\n    //\n    // right key\n    //\n    if ( ev.keyCode == 39 )\n        Shooter.moveRight = true;\n\n    //\n    // ctrl & space keys\n    //\n    if ( ev.keyCode == 17 || ev.keyCode == 32 )\n        Shooter.shooting = true;\n};\n\n/*\n|\n|   key release\n|\n*/\nShooter.keyRelease = function( ev )\n{\n    //\n    //  left key\n    //\n    if ( ev.keyCode == 37 )\n        Shooter.moveLeft = false;\n\n    //\n    // right key\n    //\n    if ( ev.keyCode == 39 )\n        Shooter.moveRight = false;\n\n    //\n    // ctrl & space keys\n    //\n    if ( ev.keyCode == 17 || ev.keyCode == 32 )\n        Shooter.shooting = false;\n};\n\n/*\n|\n|   left\n|\n|   ...move shooter\n|\n*/\nShooter.left = function()\n{\n    var newX = this.x - ( G.z * this.moveMultp );\n\n    if ( newX - this.r >= 1 )\n        this.x = newX ;\n};\n\n/*\n|\n|   right\n|\n|   ...move shooter\n|\n*/\nShooter.right = function()\n{\n    var newX = this.x + ( G.z * this.moveMultp );\n\n    if ( newX + this.r <= G.z - 1 )\n        this.x = newX;\n};\n\n/*\n|\n|   shoot\n|\n*/\nShooter.shoot = function( ctx )\n{\n    if ( this.delayShot )\n        return false;\n\n    this.engageDelay();\n\n    this.currentOpacity = this.shootOpacity;\n    Shot.launch( this.x, this.y - this.r );\n};\n\n/*\n|\n|   engage delay\n|\n|   ...delay shots a bit, no need to shoot on every frame\n|\n*/\nShooter.engageDelay = function()\n{\n    this.delayShot = true;\n    window.setTimeout( this.releaseDelay, 300);\n};\n\n/*\n|\n|   release delay\n|\n*/\nShooter.releaseDelay = function()\n{        \n    Shooter.delayShot = false;\n};\n\n/*\n|\n|   a gift for window\n|\n*/\nwindow.Shooter = Shooter;\n\n})();\n\n// EOF\n","(function(){ 'use strict';\n\n/*\n|\n|   shot\n|\n|   ...our shots/projectiles that will hurled at enemies\n|\n*/\n\nvar Shot = {\n    data : [],\n};\n\n/*\n|\n|   launch\n|\n|   ...initialize a shot\n|\n*/\nShot.launch = function( x, y )\n{\n    var shot = {\n        x : x,\n        y : y,\n        state : 'active',\n    };\n\n    this.data.push( shot );\n\n    //\n    //  notifiy score board\n    //\n    // Score.shot();\n};\n\n/*\n|\n|   draw\n|\n|   ...draw current shots\n|\n*/\nShot.draw = function( ctx )\n{\n    if ( !this.data[0] )\n        return false;\n\n    for ( var i = this.data.length - 1; i >= 0; i-- )\n        _drawEach( this.data[i], i, this.data, ctx );\n};\n\n/*\n|\n|   draw each\n|\n|   ...analyze current state of each shot and draw appropriately\n|\n*/\nvar _drawEach = function( shot, i, data, ctx )\n{\n    shot.y     = shot.y - ( G.z * 0.01 );\n    shot.state = _isMiss( shot );\n\n    if ( shot.state == 'active' )\n        _drawShot( ctx, shot );\n\n    else if ( shot.state == 'miss' )\n        _deactivate( i, data );\n\n    else if ( shot.state == 'hit' )\n        _deactivate( i, data );\n\n    else\n        _deactivate( i, data );\n};\n\n/*\n|\n|   is miss\n|\n|   ...look for misses\n|\n*/\nvar _isMiss = function( shot )\n{\n    if ( shot.y < 0 )\n        return 'miss';\n\n    return shot.state;\n};\n\n/*\n|\n|   draw shot\n|\n|   ...draw shot on the canvas\n|\n*/\nvar _drawShot = function( ctx, shot )\n{\n    ctx.beginPath();\n    ctx.fillStyle = 'white';\n    ctx.rect( shot.x, shot.y, 5, 5 );\n    ctx.fill();\n};\n\n/*\n|\n|   deactivate\n|\n|   ...shot goes away when either hits or misses enemies\n|\n*/\nvar _deactivate = function( i, data )\n{\n    data.splice( i, 1 );\n};\n\n/*\n|\n|   a gift for window\n|\n*/\nwindow.Shot = Shot;\n\n})();\n\n// EOF\n","(function(){ 'use strict';\n\n/*\n|\n|   state\n|\n|   ...mostly just manage which pane should be visible\n|\n*/\n\nvar State = {\n\n    current : '',\n\n    //\n    //  the available panes\n    //  'id' describes the element pane\n    //  'display' describes the display method for pane\n    //\n    available : [\n        {\n            id      : 'shooty-shoot',\n            display : 'flex',\n        },\n        {\n            id      : 'home',\n            display : 'flex',\n        },\n        {\n            id      : 'lose',\n            display : 'flex',\n        },\n        {\n            id      : 'win',\n            display : 'flex',\n        },\n    ],\n};\n\nState.set = function( s )\n{\n    for (var i = this.available.length - 1; i >= 0; i--) {\n        if ( this.available[i].id == s )\n            this.apply( this.available[i] );\n    }\n};\n\nState.apply = function( s )\n{\n    this.clear();\n\n    document\n        .getElementById( s.id )\n        .style\n        .display = s.display;\n};\n\nState.clear = function()\n{\n    U.loop(\n        this.available,\n        function( a )\n        {\n            var el = document.getElementById( a.id );\n\n            el.style.display = 'none';\n        });\n};\n\nwindow.State = State;\n\n})();\n\n// EOF\n","(function(){ 'use strict';\n\n/*\n|\n|   utility\n|   \n|   ...reusable helper functions\n|\n*/\n\nvar U = {};\n\n/*\n|\n|   reload the whole thing\n|\n*/\nU.reload = function()\n{\n    window.location.reload();\n};\n\n/*\n|\n|   for loop\n|\n*/\nU.loop = function( arr, fn )\n{\n    for ( var i = arr.length - 1; i >= 0; i-- )\n        fn( arr[i] );\n};\n\nwindow.U = U;\n\n})();\n\n// EOF\n"],"sourceRoot":"/source/"}