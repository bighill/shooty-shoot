{"version":3,"sources":["collision.js","data.js","enemy.js","global.js","init.js","score.js","shooter.js","shot.js","state.js","utility.js"],"names":["Collision","check","Enemy","data","enemies","length","i","enemyBottom","y","r","shooterTop","Shooter","this","_shooterCollision","Shot","j","_shotCollision","shot","sI","enemy","eI","enemyEdge","top","bottom","left","x","right","hit","G","lose","state","Score","window","Data","rowN","colN","moveMultp","rowWmultp","shiftWmultp","val","rowW","shiftW","shiftH","enemyR","shiftV","xDelta","yDelta","movingRight","movingDown","init","self","_","cloneDeep","z","speed","enemiesAndGapsN","defaultX","defaultY","n","setRow","setEnemies","push","draw","ctx","win","iDwn","_adjustEnemy","_drawEnemy","_deactivate","beginPath","fillStyle","arc","Math","PI","fill","splice","isPlaying","el","game","document","getElementById","score","canvas","home","els","playBtns","getElementsByClassName","shots","hits","accuracy","p","Promise","resolve","reject","State","set","current","then","setZ","requestAnimationFrame","drawCanvas","offsetWidth","getContext","width","height","clearRect","play","addEventListener","U","reload","playBtnListeners","removeEventListener","btns","initEnemies","_setElText","setGetAccuracy","setTimeout","_calcPercentage","actual","possible","round","txt","textContent","wMultp","defaultOpacity","shootOpacity","currentOpacity","moveLeft","moveRight","shooting","delayShot","keyPress","keyRelease","shoot","ev","keyCode","newX","engageDelay","launch","releaseDelay","_drawEach","_isMiss","_drawShot","rect","available","id","display","s","apply","clear","style","loop","a","location","arr","fn"],"mappings":"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","file":"js.js","sourcesContent":["(function(){ 'use strict';\n\n/*\n|\n|   collision\n|\n|   ...determine if enemy collided with either a shot or the shooter\n|\n*/\n\nvar Collision = {};\n\nCollision.check = function()\n{\n    if ( !Enemy.data.enemies.length )\n        return false;\n\n    for ( var i = Enemy.data.enemies.length - 1; i >= 0; i-- )\n    {\n        //\n        //  player loses if enemyBottom reaches shooterTop\n        //\n        var enemyBottom = Enemy.data.enemies[i].y + Enemy.data.enemies[i].r,\n            shooterTop  = Shooter.y - Shooter.r;\n\n        this._shooterCollision( enemyBottom, shooterTop );\n\n        //\n        //  just stop here if no currently active shots\n        //\n        if ( !Shot.data.length )\n            continue;\n\n        //\n        //  check for hits ...enemy and shot collisions\n        //\n        for ( var j = Shot.data.length - 1; j >= 0; j-- )\n            this._shotCollision( Shot.data[j], j, Enemy.data.enemies[i], i );\n    }\n};\n\n/*\n|\n|   shot collision\n|\n|   ...determine if enemy collided with a shot\n|\n*/\nCollision._shotCollision = function( shot, sI, enemy, eI )\n{\n    var enemyEdge = {};\n    enemyEdge.top    = enemy.y - enemy.r;\n    enemyEdge.bottom = enemy.y + enemy.r;\n    enemyEdge.left   = enemy.x - enemy.r;\n    enemyEdge.right  = enemy.x + enemy.r;\n\n    //\n    //  return false if shot missed all enemies\n    //\n    if ( shot.y < enemyEdge.top)\n        return false;\n\n    if ( shot.y > enemyEdge.bottom )\n        return false;\n\n    if ( shot.x < enemyEdge.left )\n        return false;\n\n    if ( shot.x > enemyEdge.right )\n        return false;\n\n    //\n    //  no misses means there was a hit\n    //\n    Collision.hit( sI, eI );\n};\n\n/*\n|\n|   shot collision\n|\n|   ...determine if enemy collided with the shooter\n|\n*/\nCollision._shooterCollision = function( enemyBottom, shooterTop )\n{\n    if ( enemyBottom > shooterTop )\n        G.lose();\n};\n\n/*\n|\n|   hit\n|\n|   ...record a collision between shot and enemy\n|\n*/\nCollision.hit = function( sI, eI )\n{\n    Shot .data[sI].state = 'hit';\n    Enemy.data.enemies[eI].state = 'dead';\n    Score.hit();\n};\n\n/*\n|\n|   a gift for window\n|\n*/\nwindow.Collision = Collision;    \n\n})();\n\n// EOF","(function(){ 'use strict';\n\n/*\n|\n|   data model\n|\n*/\n\nvar Data = {\n\n    enemy : {\n\n        //\n        //  number of rows\n        //\n        rowN : 1,\n\n        //\n        //  number of enemies in each row\n        //\n        colN : 3,\n\n        //\n        //  enemy movement speed multiplier\n        //\n        moveMultp : 0.008,\n\n        //\n        //  row width multiplier and shift width multiplier should add up to 1\n        //\n        rowWmultp   : 0.7,\n        shiftWmultp : 0.3,\n\n        //\n        //  data for state of each enemy\n        //\n        enemies : [],\n\n        //\n        //  values set initially and during play\n        //\n        val : {\n\n            //\n            //  values set by sizer()\n            //\n            rowW    : 0,\n            shiftW  : 0,\n            shiftH  : 0,\n            enemyR  : 0,\n            shiftV  : 0,\n\n            //\n            //  track enemy shift direction\n            //\n            xDelta      : 0,\n            yDelta      : 0,\n            movingRight : true,\n            movingDown  : false,\n        }\n    },\n\n    shot : [],\n};\n\n/*\n|\n|   a gift for window\n|\n*/\nwindow.Data = Data;\n\n})();\n\n// EOF\n","(function(){ 'use strict';\n\n/*\n|\n|   enemy\n|\n|   ...boooo\n|\n*/\n\nvar Enemy = {\n\n    /*\n    this data set by init()\n\n    data to expect...\n\n    rowN (int)\n    colN (int)\n    moveMultp (float)\n    rowWmultp (float)\n    shiftWmultp (float)\n    enemies (array)\n\n    val (obj)\n        rowW (float)\n        shiftW (float)\n        shiftH (float)\n        enemyR (float)\n        shiftV (float)\n        xDelta (float)\n        yDelta (float)\n        movingRight (bool)\n        movingDown (bool)\n    */\n    data : {},\n};\n\n/*\n|\n|   init\n|\n*/\nEnemy.init = function()\n{\n    var self = Enemy;\n\n    //\n    //  load data from data model\n    //\n    self.data = _.cloneDeep( Data.enemy );\n\n    //\n    //  set global enemy values\n    //\n    self.data.val.rowW   = G.z * self.data.rowWmultp;\n    self.data.val.shiftW = G.z * self.data.shiftWmultp;\n    self.data.val.shiftV = self.data.moveMultp * G.z * G.speed;\n    \n    var enemiesAndGapsN = ( self.data.colN * 2 ) - 1;  \n    self.data.val.enemyR = ( self.data.val.rowW / enemiesAndGapsN ) / 2;\n\n    self.data.val.shiftH = self.data.val.enemyR;\n\n    //\n    //  default values for each enemy\n    //\n    var x = self.data.val.enemyR,\n        y = self.data.val.enemyR,\n        r = self.data.val.enemyR,\n        defaultX = x,\n        defaultY = y;\n\n    //\n    //  initialize each enemy\n    //\n    for ( var n = self.data.rowN - 1; n >= 0; n-- )\n    {\n        for ( var i = self.data.colN - 1; i >= 0; i-- )\n        {\n            self.setRow( x, y, r );        \n            x = x + ( r * 4 );\n        }\n\n        x = defaultX;\n        y = defaultY + ( r * 4 * n );\n    }\n\n    //\n    //  notify scoreboard, total # of enemies\n    //\n    Score.setEnemies( self.data.rowN * self.data.colN );\n};\n\n/*\n|\n|   set row\n|\n|   ...initialize data for row of enemies\n|\n*/\nEnemy.setRow = function( x, y, r )\n{\n    var enemy = {\n            x : x,\n            y : y,\n            r : r,\n            state : 'active',\n        };\n\n    this.data.enemies.push( enemy );\n};\n\n/*\n|\n|   draw\n|\n|   ...start drawing all enemies\n|\n*/\nEnemy.draw = function( ctx )\n{\n    if ( !this.data.enemies[0] )\n    {\n        G.win();\n        return false;\n    }\n\n    if ( this.data.val.movingDown )\n    {\n        this.data.val.yDelta = this.data.val.yDelta + this.data.val.shiftV;\n\n        if ( this.data.val.yDelta >= this.data.val.shiftH )\n        {\n            this.data.val.movingDown = false;\n            this.data.val.yDelta = 0;\n        }\n\n        for ( var iDwn = this.data.enemies.length - 1; iDwn >= 0; iDwn-- )\n            this._adjustEnemy( this.data.enemies[iDwn], ctx, iDwn, this.data.enemies, this.data.val.shiftV ); \n    }\n    else\n    {\n        this.data.val.xDelta = this.data.val.xDelta + this.data.val.shiftV;\n\n        if ( this.data.val.xDelta >= this.data.val.shiftW )\n        {\n            this.data.val.movingRight = !this.data.val.movingRight;\n            this.data.val.xDelta = 0;\n            this.data.val.movingDown = true;\n        }\n\n        for ( var i = this.data.enemies.length - 1; i >= 0; i-- )\n            this._adjustEnemy( this.data.enemies[i], ctx, i, this.data.enemies, this.data.val.shiftV );\n    }\n};\n\n/*\n|\n|   adjust enemy\n|\n|   ...movement and state adjustments for each frame\n|\n*/\nEnemy._adjustEnemy = function( enemy, ctx, i, enemies, shiftV )\n{\n    //\n    // movement\n    //\n    if ( this.data.val.movingDown )\n        enemy.y = enemy.y + shiftV;\n\n    else if ( this.data.val.movingRight )\n        enemy.x = enemy.x + shiftV;\n\n    else\n        enemy.x = enemy.x - shiftV;\n\n    //\n    //  state\n    //\n    if ( enemy.state == 'active' )\n        this._drawEnemy( enemy, ctx );\n\n    else if ( enemy.state == 'dead' )\n        this._deactivate( i, enemies );\n\n    else\n        this._deactivate( i, enemies );\n};\n\n/*\n|\n|   draw enemy\n|\n|   ...draw enemy on the canvas\n|\n*/\nEnemy._drawEnemy = function( enemy, ctx )\n{\n    ctx.beginPath();\n    ctx.fillStyle = 'rgba( 255, 99, 71, 0.5 )';\n    ctx.arc( enemy.x, enemy.y, enemy.r, 0, 2 * Math.PI );\n    ctx.fill();\n};\n\n/*\n|\n|   deactivate\n|\n|   ...when hit,\n|       an enemy must be sent to a farm upstate\n|       to live out it's final days frolicing in the country side.\n|\n*/\nEnemy._deactivate = function( i, enemies )\n{\n    enemies.splice( i, 1 );\n};\n\n/*\n|\n|   a gift for window\n|\n*/\nwindow.Enemy = Enemy;\n\n})();\n\n// EOF\n","(function(){ 'use strict';\n\n/*\n|\n|   global\n|\n|   ...main object for controlling the game\n|\n*/\n\nvar G = {\n\n    //\n    //  global game speed\n    //\n    speed : 1.3,\n\n    // \n    // values\n    //\n    isPlaying   : false,\n    z           : 0,\n    top         : 0,\n    left        : 0,\n\n    //\n    //  elements\n    //\n    el : {\n        game    : document.getElementById( 'shooty-shoot' ),\n        score   : document.getElementById( 'score' ),\n        canvas  : document.getElementById( 'shooty-shoot-canvas' ),\n        home    : document.getElementById( 'home' ),\n        lose    : document.getElementById( 'lose' ),\n        win     : document.getElementById( 'win' ),\n    },\n    els : {\n        playBtns : document.getElementsByClassName( 'play-btn'),\n        shots    : document.getElementsByClassName( 'shots' ),\n        hits     : document.getElementsByClassName( 'hits' ),\n        accuracy : document.getElementsByClassName( 'accuracy' ), \n    },\n};\n\n/*\n|\n|   init\n|\n*/\nG.init = function()\n{\n    //\n    //  promise that first displays game elements in dom\n    //\n    var p = new Promise(function(resolve, reject)\n    {\n        State.set( 'shooty-shoot' );\n\n        if ( State.current == 'shooty-shoot' )\n            resolve('Success!');\n\n        else\n            reject('Failure!');\n    });\n\n    //\n    //  things to do after the State.set() promise\n    //\n    p.then( G.setZ )\n        .then( Enemy.init )\n        .then( Shooter.init )\n        .then( Shot.init )\n        .then( function() {\n            G.isPlaying = true;\n        })\n        .then( function() {\n            window.requestAnimationFrame( G.drawCanvas );            \n        })\n        .then( Score.init );\n};\n\n/*\n|\n|   set z\n|\n|   ...(it's a new promise)\n|\n*/\nG.setZ = function()\n{\n    G.z = G.el.canvas.offsetWidth;\n};\n\n/*\n|\n|   draw canvas\n|\n|   ...the primary controller for drawing to canvas\n|\n*/\nG.drawCanvas = function()\n{\n    var ctx = G.el.canvas.getContext( '2d' );\n\n    ctx.canvas.width  = G.z;\n    ctx.canvas.height = G.z;\n\n    ctx.clearRect( 0, 0, G.z, G.z ); // clear canvas\n\n    //\n    //  check for all possible collisions\n    //\n    Collision.check();\n\n    //\n    //  draw the elements\n    //\n    Enemy.draw( ctx );\n    Shooter.draw( ctx );\n    Shot.draw( ctx );\n\n    //\n    //  draw next frame\n    //\n    if ( G.isPlaying )\n        window.requestAnimationFrame( G.drawCanvas );\n};\n\n/*\n|\n|   play\n|\n|   ...do all the things needed to start the game\n|\n*/\nG.play = function()\n{\n    G.init();\n    // window.requestAnimationFrame( G.drawCanvas );\n    // Score.init();    \n};\n\n/*\n|\n|   win\n|\n|   ...do all the things needed the game has been won\n|\n*/\nG.win = function()\n{\n    G.isPlaying = false;\n    State.set( 'win' );\n};\n\n/*\n|\n|   lose\n|\n|   ...do all the things needed the game has been lost\n|\n*/\nG.lose = function()\n{\n    G.isPlaying = false;\n    State.set( 'lose' );\n};\n\nwindow.G = G;\n\n})();\n\n// EOF\n","(function(){ 'use strict';\n\n/*\n|\n|   get the party started\n|\n*/\nvar init = function()\n{\n    //\n    //  if window is resized, just reload and start over\n    //\n    window.addEventListener( 'resize', U.reload );\n\n    //\n    //  button listeners\n    //\n    playBtnListeners( G.els.playBtns );\n\n    //\n    //  display home pane\n    //\n    State.set( 'home' );\n\n    //\n    //  init() is complete\n    //  cleanup the DOMContentLoaded listener\n    //\n    document.removeEventListener( \"DOMContentLoaded\", init );\n};\n\n/*\n|\n|   listeners for buttons outside of the game\n|\n*/\nvar playBtnListeners = function( btns )\n{\n    for ( var i = btns.length - 1; i >= 0; i-- )\n        btns[i].addEventListener( 'click', G.play );\n};\n\n/*\n|\n|   hello browser.  please accept this code.  thx!\n|\n*/\ndocument.addEventListener( 'DOMContentLoaded', init );\n\n})();\n\n// EOF\n","(function(){ 'use strict';\n\n/*\n|\n|   score\n|\n|   ...track score board stats\n|\n*/\n\nvar Score = {\n\n    initEnemies : 0,\n    enemies     : 0,\n    shots       : 0,\n    hits        : 0,\n    accuracy    : 0,\n};\n\n/*\n|\n|   init\n|\n*/\nScore.init = function()\n{\n    Score.draw();\n};\n\n/*\n|\n|   draw\n|\n|   ...display score stats in scoreboard\n|\n*/\nScore.draw = function()\n{\n    this._setElText( G.els.shots, this.shots );\n    this._setElText( G.els.hits, this.hits );\n    this._setElText( G.els.accuracy, this.setGetAccuracy() );\n\n    window.setTimeout( function() { Score.draw(); }, 500);\n};\n\n/*\n|\n|   set enemies\n|\n*/\nScore.setEnemies = function( n )\n{\n    this.initEnemies = n;\n    this.enemies     = n;\n\n    return this.enemies;\n};\n\n/*\n|\n|   shot\n|\n|   ...record a new shot\n|\n*/\nScore.shot = function()\n{\n    this.shots++;\n    return this.shots;\n};\n\n/*\n|\n|   hit\n|\n|   ...record a new hit\n|\n*/\nScore.hit = function()\n{\n    this.hits++;\n    this.enemies--;\n\n    return this.hits;\n};\n\n/*\n|\n|   set/get accuracy\n|\n|   ...determine current accuracy and return that\n|\n*/\nScore.setGetAccuracy = function()\n{\n    //\n    //  avoid zero divided by zero\n    //\n    if ( !this.shots )\n        return this.accuracy;\n\n    //\n    //  ok, do the thing\n    //\n    this.accuracy = this._calcPercentage( this.hits, this.shots );\n\n    return this.accuracy;\n};\n\n/*\n|\n|   calculate percentage\n|\n*/\nScore._calcPercentage = function( actual, possible )\n{\n    var p = actual / possible;\n\n    p = p * 100;\n    p = Math.round( p );\n\n    return p;\n};\n\n/*\n|\n|   set element text\n|\n|   ...apply to scoreboard dom elements\n|\n*/\nScore._setElText = function( els, txt )\n{\n    for ( var i = els.length - 1; i >= 0; i-- )\n        els[i].textContent = txt;\n\n    return txt;\n};\n\n/*\n|\n|   a gift for window\n|\n*/\nwindow.Score = Score;\n\n})();\n\n// EOF\n","(function(){ 'use strict';\n\n/*\n|\n|   shooter\n|\n|   ...brrap brrap pew pew\n|\n*/\n\nvar Shooter = {\n\n    //\n    // multipliers\n    //\n    wMultp      : 0.05,\n    moveMultp   : 0.01,\n\n    //\n    //  values set by this.init()\n    //\n    x : 0,\n    y : 0,\n    r : 0,\n\n    //\n    //  opacity\n    //\n    defaultOpacity  : 0.5,\n    shootOpacity    : 0.7,\n    currentOpacity  : 0.5,\n\n    //\n    // actions\n    //\n    moveLeft    : false,\n    moveRight   : false,\n    shooting    : false,\n    delayShot   : false,\n};\n\n/*\n|\n|   init\n|\n|   ...set values and add listeners\n|\n*/\nShooter.init = function()\n{\n    var self = Shooter;\n\n    self.r = G.z * self.wMultp;\n    self.x = ( G.z / 2 );\n    self.y = G.z - self.r - 1;\n\n    window.addEventListener( 'keydown', self.keyPress );\n    window.addEventListener( 'keyup', self.keyRelease );\n};\n\n/*\n|\n|   draw\n|\n|   ...analyze the state of things, adjust as needed, then draw\n|\n*/\nShooter.draw = function( ctx )\n{\n    //\n    //  prepare to draw\n    //\n    ctx.beginPath();\n    ctx.fillStyle = 'rgba( 126, 192, 238, '+this.currentOpacity+' )';\n\n    //\n    //  analyze actions\n    //\n    if ( this.moveLeft )\n        this.left();\n\n    if ( this.moveRight )\n        this.right();\n\n    if ( this.shooting )\n        this.shoot( ctx );\n\n    if ( this.currentOpacity > this.defaultOpacity )\n        this.currentOpacity = this.currentOpacity - 0.01;\n\n    //\n    //  draw\n    //\n    ctx.arc( this.x, this.y, this.r, 0, 2 * Math.PI );\n    ctx.fill();\n};\n\n/*\n|\n|   key press\n|\n*/\nShooter.keyPress = function( ev )\n{\n    //\n    //  left key\n    //\n    if ( ev.keyCode == 37 )\n        Shooter.moveLeft = true;\n\n    //\n    // right key\n    //\n    if ( ev.keyCode == 39 )\n        Shooter.moveRight = true;\n\n    //\n    // ctrl & space keys\n    //\n    if ( ev.keyCode == 17 || ev.keyCode == 32 )\n        Shooter.shooting = true;\n};\n\n/*\n|\n|   key release\n|\n*/\nShooter.keyRelease = function( ev )\n{\n    //\n    //  left key\n    //\n    if ( ev.keyCode == 37 )\n        Shooter.moveLeft = false;\n\n    //\n    // right key\n    //\n    if ( ev.keyCode == 39 )\n        Shooter.moveRight = false;\n\n    //\n    // ctrl & space keys\n    //\n    if ( ev.keyCode == 17 || ev.keyCode == 32 )\n        Shooter.shooting = false;\n};\n\n/*\n|\n|   left\n|\n|   ...move shooter\n|\n*/\nShooter.left = function()\n{\n    var newX = this.x - ( G.z * this.moveMultp );\n\n    if ( newX - this.r >= 1 )\n        this.x = newX ;\n};\n\n/*\n|\n|   right\n|\n|   ...move shooter\n|\n*/\nShooter.right = function()\n{\n    var newX = this.x + ( G.z * this.moveMultp );\n\n    if ( newX + this.r <= G.z - 1 )\n        this.x = newX;\n};\n\n/*\n|\n|   shoot\n|\n*/\nShooter.shoot = function( ctx )\n{\n    if ( this.delayShot )\n        return false;\n\n    this.engageDelay();\n\n    this.currentOpacity = this.shootOpacity;\n    Shot.launch( this.x, this.y - this.r );\n};\n\n/*\n|\n|   engage delay\n|\n|   ...delay shots a bit, no need to shoot on every frame\n|\n*/\nShooter.engageDelay = function()\n{\n    this.delayShot = true;\n    window.setTimeout( this.releaseDelay, 300);\n};\n\n/*\n|\n|   release delay\n|\n*/\nShooter.releaseDelay = function()\n{        \n    Shooter.delayShot = false;\n};\n\n/*\n|\n|   a gift for window\n|\n*/\nwindow.Shooter = Shooter;\n\n})();\n\n// EOF\n","(function(){ 'use strict';\n\n/*\n|\n|   shot\n|\n|   ...our shots/projectiles that will hurled at enemies\n|\n*/\n\nvar Shot = {\n    data : [],\n};\n\n/*\n|\n|   init\n|\n*/\nShot.init = function()\n{\n    Shot.data = _.cloneDeep( Data.shot );\n};\n\n/*\n|\n|   launch\n|\n|   ...initialize a shot\n|\n*/\nShot.launch = function( x, y )\n{\n    var shot = {\n        x : x,\n        y : y,\n        state : 'active',\n    };\n\n    this.data.push( shot );\n\n    //\n    //  notifiy score board\n    //\n    Score.shot();\n};\n\n/*\n|\n|   draw\n|\n|   ...draw current shots\n|\n*/\nShot.draw = function( ctx )\n{\n    if ( !this.data[0] )\n        return false;\n\n    for ( var i = this.data.length - 1; i >= 0; i-- )\n        _drawEach( this.data[i], i, this.data, ctx );\n};\n\n/*\n|\n|   draw each\n|\n|   ...analyze current state of each shot and draw appropriately\n|\n*/\nvar _drawEach = function( shot, i, data, ctx )\n{\n    shot.y     = shot.y - ( G.z * 0.01 );\n    shot.state = _isMiss( shot );\n\n    if ( shot.state == 'active' )\n        _drawShot( ctx, shot );\n\n    else if ( shot.state == 'miss' )\n        _deactivate( i, data );\n\n    else if ( shot.state == 'hit' )\n        _deactivate( i, data );\n\n    else\n        _deactivate( i, data );\n};\n\n/*\n|\n|   is miss\n|\n|   ...look for misses\n|\n*/\nvar _isMiss = function( shot )\n{\n    if ( shot.y < 0 )\n        return 'miss';\n\n    return shot.state;\n};\n\n/*\n|\n|   draw shot\n|\n|   ...draw shot on the canvas\n|\n*/\nvar _drawShot = function( ctx, shot )\n{\n    ctx.beginPath();\n    ctx.fillStyle = 'white';\n    ctx.rect( shot.x, shot.y, 5, 5 );\n    ctx.fill();\n};\n\n/*\n|\n|   deactivate\n|\n|   ...shot goes away when either hits or misses enemies\n|\n*/\nvar _deactivate = function( i, data )\n{\n    data.splice( i, 1 );\n};\n\n/*\n|\n|   a gift for window\n|\n*/\nwindow.Shot = Shot;\n\n})();\n\n// EOF\n","(function(){ 'use strict';\n\n/*\n|\n|   state\n|\n|   ...mostly just manage which pane should be visible\n|\n*/\n\nvar State = {\n\n    current : '',\n\n    //\n    //  the available panes\n    //  'id' describes the element pane\n    //  'display' describes the display method for pane\n    //\n    available : [\n        {\n            id      : 'shooty-shoot',\n            display : 'flex',\n        },\n        {\n            id      : 'home',\n            display : 'flex',\n        },\n        {\n            id      : 'lose',\n            display : 'flex',\n        },\n        {\n            id      : 'win',\n            display : 'flex',\n        },\n    ],\n};\n\nState.set = function( s )\n{\n    for (var i = this.available.length - 1; i >= 0; i--) {\n        if ( this.available[i].id == s )\n            this.apply( this.available[i] );\n    }\n};\n\nState.apply = function( s )\n{\n    this.current = s.id;\n\n    this.clear();\n\n    document\n        .getElementById( s.id )\n        .style\n        .display = s.display;\n};\n\nState.clear = function()\n{\n    U.loop(\n        this.available,\n        function( a )\n        {\n            var el = document.getElementById( a.id );\n\n            el.style.display = 'none';\n        });\n};\n\nwindow.State = State;\n\n})();\n\n// EOF\n","(function(){ 'use strict';\n\n/*\n|\n|   utility\n|   \n|   ...reusable helper functions\n|\n*/\n\nvar U = {};\n\n/*\n|\n|   reload the whole thing\n|\n*/\nU.reload = function()\n{\n    window.location.reload();\n};\n\n/*\n|\n|   for loop\n|\n*/\nU.loop = function( arr, fn )\n{\n    for ( var i = arr.length - 1; i >= 0; i-- )\n        fn( arr[i] );\n};\n\nwindow.U = U;\n\n})();\n\n// EOF\n"],"sourceRoot":"/source/"}